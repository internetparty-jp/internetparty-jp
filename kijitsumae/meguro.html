<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<title>[ インターネッ党 ] : 2014年都知事選挙 期日前投票所MAP 目黒区</title>
	<style type="text/css">
	html { height: 100% }
	body { height: 100%; margin: 0; padding: 0 }
	#map_canvas { height: 100% }
	</style>
	<script type="text/javascript"
	src="http://maps.googleapis.com/maps/api/js?key=AIzaSyA_YYYirAi-2ZU8k7dJ-5K41At7_0TVPww&sensor=false">
	</script>
	<script type="text/javascript">

var startLocation;
var map;
function initialize() {
	var mapOptions = {
		center: new google.maps.LatLng(35.630512,139.69079),
		zoom: 13,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
		for(var i = 0;i< points.length;i++){
			point(points[i],map);
		};
}

function point(arr,map){
	var Latlng = new google.maps.LatLng(arr[2],arr[3]);
	var marker = new google.maps.Marker(
		{ position: Latlng,
			map: map,
			title: arr[0]});
	var infowindow = new google.maps.InfoWindow({
		content: arr[0]+"<br /> "+ arr[1]+ "<br />"
		+"<a href='#' onclick=\'myroute(\""+arr[1]+"\")\'>現在地からのルートを表示</a>" ,
		position: Latlng
	});
	google.maps.event.addListener(marker, 'click', function() {
		infowindow.open(map);
	});
}

function myroute(target){
  var url = 'http://maps.google.co.jp/maps?f=d&source=s_d&saddr=FROMLAT,FROMLNG&daddr=TODEST';
    url = url.replace(/FROMLAT/, startLocation.lat());
    url = url.replace(/FROMLNG/, startLocation.lng());
    url = url.replace(/TODEST/, target);
    location.href = url;
}

/* https://developers.google.com/maps/documentation/javascript/directions?hl=ja
　ルート表示　http://d.hatena.ne.jp/fatwebstudy/20120905/1346845897
*/

var points =[
["目黒区総合庁舎","目黒区上目黒2－19－15 ",35.641263,139.6985906],
["北部地区サービス事務所","目黒区大橋1-5-1クロスエアタワー9階 ",35.6514771,139.6885052],
["田道ふれあい館","目黒区目黒1－25－26 ",35.6367332,139.708201],
["防災センター ","目黒区中央町1－9－7 ",35.6291087,139.6920582],
["碑住区センター ","目黒区碑文谷2－16－6 ",35.6207651,139.6876505],
["八雲住区センター ","目黒区八雲1－10－5 ",35.6186927,139.6722825]
];

</script>
</head>
<body onload="initialize()">
	<div id="map_canvas" style="width:100%; height:100%"></div>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-47675473-1', 'internetparty.jp');
	  ga('send', 'pageview');

	</script>
</body>
</html>